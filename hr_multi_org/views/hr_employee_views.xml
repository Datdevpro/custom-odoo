<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<!-- Extend Employee Form: Multi Managers, Positions, Departments -->
		<record id="view_hr_employee_form_multi_org" model="ir.ui.view">
			<field name="name">hr.employee.form.multi.org</field>
			<field name="model">hr.employee</field>
			<field name="inherit_id" ref="hr.view_employee_form"/>
			<field name="arch" type="xml">
				<xpath expr="//group[.//field[@name='parent_id']]" position="after">
					<group string="Management">
						<field name="primary_manager_id"/>
						<field name="manager_ids" widget="many2many_tags"/>
					</group>
				</xpath>
				<xpath expr="//notebook" position="inside">
					<page string="Roles &amp; Structure" name="roles_structure">
						<group>
							<group string="Positions">
								<field name="position_ids" widget="many2many_tags"/>
							</group>
							<group string="Departments">
								<field name="department_ids" widget="many2many_tags"/>
							</group>
						</group>
						<button name="action_open_org_chart" type="object" string="Open Org Chart" class="btn-primary"/>
					</page>
				</xpath>
			</field>
		</record>

		<!-- Simple tree extension to show primary manager -->
		<record id="view_hr_employee_tree_multi_org" model="ir.ui.view">
			<field name="name">hr.employee.tree.multi.org</field>
			<field name="model">hr.employee</field>
			<field name="inherit_id" ref="hr.view_employee_tree"/>
			<field name="arch" type="xml">
				<xpath expr="//field[@name='work_location_id']" position="after">
					<field name="primary_manager_id" optional="show"/>
				</xpath>
			</field>
		</record>

		<!-- Org Structure menu (opens org chart if module present) -->
		<record id="action_hr_multi_org_chart" model="ir.actions.client">
			<field name="name">Organization Structure</field>
			<field name="tag">hr_org_chart</field>
		</record>

		<menuitem id="menu_hr_multi_org_root" name="HR Structure" parent="hr.menu_hr_root" sequence="95"/>
		<menuitem id="menu_hr_multi_org_chart" name="Organization Chart" parent="menu_hr_multi_org_root" action="action_hr_multi_org_chart" sequence="10"/>
	</data>
</odoo>
